<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Analytics — QR1.tech</title>
<link rel="stylesheet" href="assets/styles.css">
</head>
<body>
<div class="container">
  
<nav class="nav">
  <a class="logo" href="index.html">QR1.tech</a>
  <div class="links">
    <a href="index.html">Home</a>
    <a href="builder.html">Create</a>
    <a href="connect.html">Connect</a>
    <a href="analytics.html">Analytics</a>
    <a href="policies.html">Pricing</a>
  </div>
</nav>

  <section class="screen">
    <div class="layout panel" style="width:100%;display:flex;gap:16px">
      <div class="main" style="flex:1">
        <span class="badge ai">Powerful AI insights</span>
        <h2 id="codeTitle" style="margin:8px 0">Analytics</h2>
        <div class="grid two">
          <div class="card center"><canvas id="line" width="520" height="260"></canvas></div>
          <div class="card">
            <h3 style="margin:6px 0">Recent Scans</h3>
            <div id="log" class="meta">—</div>
          </div>
        </div>
      </div>
      <aside class="sidebar">
        <div class="card">
          <strong>Your QR codes</strong>
          <div id="codeList" class="list" style="margin-top:8px"></div>
        </div>
      </aside>
    </div>
  </section>
  <div class="footer">Lifetime membership is ad‑free.</div>
</div>
<script>
function loadCodes(){
  return JSON.parse(localStorage.getItem('qr1_codes')||'[]');
}
function setActive(id){
  localStorage.setItem('qr1_last_code_id', id);
  render();
}
function render(){
  const codes = loadCodes();
  const last = localStorage.getItem('qr1_last_code_id') || (codes[0] && codes[0].id);
  const current = codes.find(c=>c.id===last);
  const title = document.getElementById('codeTitle');
  const list = document.getElementById('codeList');
  const log = document.getElementById('log');
  list.innerHTML='';
  if(!codes.length){
    title.textContent='No analytics yet';
    log.textContent='Create a code first.';
    return;
  }
  const name = (current && current.name) || 'Untitled QR';
  title.textContent = name;
  codes.forEach(c=>{
    const a=document.createElement('a');
    a.href='#';
    a.textContent=c.name||'Untitled QR';
    a.className=''+(c.id===last?'active':'');
    a.onclick=(e)=>{e.preventDefault(); setActive(c.id);};
    list.appendChild(a);
  });
  // demo scan log
  const recent = [
    ['10:41','Pretoria','iPhone Safari'],
    ['09:15','Johannesburg','Chrome']
  ];
  log.innerHTML = recent.map(r=>`${r[0]} — ${r[1]} — ${r[2]}`).join('<br>');
  // draw simple line chart
  const ctx = document.getElementById('line').getContext('2d');
  const d = (current && current.scans) || [3,4,6,5,7,8,9];
  const w=ctx.canvas.width, h=ctx.canvas.height, pad=20;
  const max=Math.max(...d), min=Math.min(...d), step=(w-2*pad)/(d.length-1);
  ctx.clearRect(0,0,w,h);
  ctx.strokeStyle='#2563EB'; ctx.lineWidth=2; ctx.beginPath();
  d.forEach((v,i)=>{
    const x=pad+i*step;
    const y=h-pad-((v-min)/(max-min||1))*(h-2*pad);
    if(i) ctx.lineTo(x,y); else ctx.moveTo(x,y);
  });
  ctx.stroke();
}
window.addEventListener('DOMContentLoaded', render);
</script>
</body></html>
